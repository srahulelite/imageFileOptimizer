<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Image/Video File Optimizer — Sandbox</title>
  <style>
    body { font-family: Arial, sans-serif; max-width:720px; margin:40px auto; }
    .box { padding:16px; border:1px solid #ddd; border-radius:6px; }
    label { display:block; margin-bottom:8px; }
  </style>
</head>
<body>
  <h1>Image/Video File Optimizer — UI (placeholder)</h1>

  <div class="box">
    <label>Select files (multiple allowed):</label>
    <input id="files" type="file" multiple />
    <div style="margin-top:10px;">
      <label>Quality:</label>
      <select id="quality">
        <option value="avg" selected>Average</option>
        <option value="low">Low</option>
        <option value="high">High</option>
      </select>
    </div>
    <div style="margin-top:12px;">
      <button id="uploadBtn">Upload (will call stub)</button>
    </div>

    <div id="status" style="margin-top:12px;color:#555"></div>
  </div>

<script>
document.getElementById('uploadBtn').addEventListener('click', async () => {
  const filesEl = document.getElementById('files');
  const quality = document.getElementById('quality').value;
  const status = document.getElementById('status');

  if (!filesEl.files.length) { status.textContent = 'Pick one or more files first.'; return; }

  const fd = new FormData();
  for (let i=0;i<filesEl.files.length;i++) fd.append('files[]', filesEl.files[i]);
  fd.append('quality', quality);

  status.textContent = 'Uploading... (will hit stub endpoint)';
  try {
    const res = await fetch('/api/upload', { method: 'POST', body: fd });
    const j = await res.json();
    status.textContent = 'Response: ' + (j.message || JSON.stringify(j));
  } catch (err) {
    status.textContent = 'Error: ' + err;
  }
});
</script>
</body>
</html>
